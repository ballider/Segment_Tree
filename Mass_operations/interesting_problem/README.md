Wall:

Джан-Джи строит стену из кирпичей одинакового размера. Стена состоит из n столбцов кирпичей, пронумерованных слева направо от 0 до (n−1). Высотой столбца называется количество кирпичей в нем. У столбцов могут быть разные высоты.

Джан-Джи строит стену так. Сначала ни в одном из столбцов нет кирпичей. Далее Джан-Джи выполняет k действий, каждое из которых может быть действием добавления или удаления кирпичей. Строительство считается законченным, когда выполнены все k действий. Перед каждым действием Джан-Джи выбирает интервал из последовательно стоящих столбцов и высоту h. После этого он выполняет одно из следующих действий:

действие добавления: Джан-Джи добавляет кирпичи в столбцы из выбранного интервала, высота которых меньше чем h, так, чтобы она стала равной h. Со столбцами, высота которых не меньше, чем h, он ничего не делает;
действие удаления: Джан-Джи убирает кирпичи из столбцов из выбранного интервала, высота которых больше чем h, так, чтобы она стала равной h. Со столбцами, высота которых не больше, чем h, он ничего не делает.
Требуется определить конечную форму стены.

Weight Sum:

В этой задаче вам надо обрабатывать запросы о взвешенной сумме для заданного массива. Формально, пусть задан массив a[1…n] длины n. Ваша задача уметь обрабатывать запросы двух видов:

запрос изменения на отрезке: запрос характеризуется тремя числами l,r,d и обозначает прибавление d ко всем элементам i массива, таким что l≤i≤r,
запрос взвешенной суммы: запрос характеризуется двумя числами l,r и обозначает вывод значения a[l]⋅1+a[l+1]⋅2+… a[r]⋅(r−l+1).
